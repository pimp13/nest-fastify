model Workflow {
    id        String @id @default(uuid())
    name      String
    projectId String @unique

    project     Project      @relation(fields: [projectId], references: [id])
    statuses    Status[]
    transitions Transition[]
}

model Status {
    id         String  @id @default(uuid())
    name       String
    color      String?
    workflowId String

    workflow        Workflow     @relation(fields: [workflowId], references: [id])
    fromTransitions Transition[] @relation("fromStatus")
    toTransitions   Transition[] @relation("toStatus")
    issues          Issue[]
}

model Transition {
    id   String @id @default(uuid())
    name String

    fromId     String
    toId       String
    workflowId String

    from Status @relation("fromStatus", fields: [fromId], references: [id])
    to   Status @relation("toStatus", fields: [toId], references: [id])

    workflow Workflow @relation(fields: [workflowId], references: [id])
}
